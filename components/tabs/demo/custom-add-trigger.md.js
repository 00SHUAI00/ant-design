webpackJsonp([98,359],{803:function(n,a,s){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}var p=(s(7),s(6)),o=t(p),e=(s(62),s(61)),c=t(e),u=s(1),l=t(u),k=s(2);t(k);n.exports={content:[["p","\u9690\u85cf\u9ed8\u8ba4\u7684\u9875\u7b7e\u589e\u52a0\u56fe\u6807\uff0c\u7ed9\u81ea\u5b9a\u4e49\u89e6\u53d1\u5668\u7ed1\u5b9a\u4e8b\u4ef6\u3002"]],meta:{order:11,title:"\u81ea\u5b9a\u4e49\u65b0\u589e\u9875\u7b7e\u89e6\u53d1\u5668",filename:"components/tabs/demo/custom-add-trigger.md",id:"components-tabs-demo-custom-add-trigger"},toc:["ul"],highlightedCode:["pre",{lang:"jsx",highlighted:'<span class="token keyword" >import</span> <span class="token punctuation" >{</span> Tabs<span class="token punctuation" >,</span> Button <span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >\'antd\'</span><span class="token punctuation" >;</span>\n<span class="token keyword" >const</span> TabPane <span class="token operator" >=</span> Tabs<span class="token punctuation" >.</span>TabPane<span class="token punctuation" >;</span>\n\n<span class="token keyword" >const</span> Demo <span class="token operator" >=</span> React<span class="token punctuation" >.</span><span class="token function" >createClass</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>\n  <span class="token function" >getInitialState</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n    <span class="token keyword" >this</span><span class="token punctuation" >.</span>newTabIndex <span class="token operator" >=</span> <span class="token number" >0</span><span class="token punctuation" >;</span>\n    <span class="token keyword" >const</span> panes <span class="token operator" >=</span> <span class="token punctuation" >[</span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>TabPane</span> <span class="token attr-name" >tab</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>\u9009\u9879\u5361<span class="token punctuation" >"</span></span> <span class="token attr-name" >key</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>1<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>\u9009\u9879\u5361\u4e00\u5185\u5bb9<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>TabPane</span><span class="token punctuation" >></span></span><span class="token punctuation" >,</span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>TabPane</span> <span class="token attr-name" >tab</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>\u9009\u9879\u5361<span class="token punctuation" >"</span></span> <span class="token attr-name" >key</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>2<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>\u9009\u9879\u5361\u4e8c\u5185\u5bb9<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>TabPane</span><span class="token punctuation" >></span></span><span class="token punctuation" >,</span>\n    <span class="token punctuation" >]</span><span class="token punctuation" >;</span>\n    <span class="token keyword" >return</span> <span class="token punctuation" >{</span>\n      activeKey<span class="token punctuation" >:</span> panes<span class="token punctuation" >[</span><span class="token number" >0</span><span class="token punctuation" >]</span><span class="token punctuation" >.</span>key<span class="token punctuation" >,</span>\n      panes<span class="token punctuation" >,</span>\n    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>\n  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>\n  <span class="token function" >onChange</span><span class="token punctuation" >(</span>activeKey<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span> activeKey <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>\n  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>\n  <span class="token function" >onEdit</span><span class="token punctuation" >(</span>targetKey<span class="token punctuation" >,</span> action<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n    <span class="token keyword" >this</span><span class="token punctuation" >[</span>action<span class="token punctuation" >]</span><span class="token punctuation" >(</span>targetKey<span class="token punctuation" >)</span><span class="token punctuation" >;</span>\n  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>\n  <span class="token function" >add</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n    <span class="token keyword" >const</span> panes <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>panes<span class="token punctuation" >;</span>\n    <span class="token keyword" >const</span> activeKey <span class="token operator" >=</span> <span class="token template-string" ><span class="token string" >`newTab</span><span class="token interpolation" ><span class="token interpolation-punctuation punctuation" >${</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>newTabIndex<span class="token operator" >++</span><span class="token interpolation-punctuation punctuation" >}</span></span><span class="token string" >`</span></span><span class="token punctuation" >;</span>\n    panes<span class="token punctuation" >.</span><span class="token function" >push</span><span class="token punctuation" >(</span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>TabPane</span> <span class="token attr-name" >tab</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>\u65b0\u5efa\u9875\u7b7e<span class="token punctuation" >"</span></span> <span class="token attr-name" >key</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>activeKey<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>\u65b0\u9875\u9762<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>TabPane</span><span class="token punctuation" >></span></span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>\n    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span> panes<span class="token punctuation" >,</span> activeKey <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>\n  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>\n  <span class="token function" >remove</span><span class="token punctuation" >(</span>targetKey<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n    <span class="token keyword" >let</span> activeKey <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>activeKey<span class="token punctuation" >;</span>\n    <span class="token keyword" >let</span> lastIndex<span class="token punctuation" >;</span>\n    <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>panes<span class="token punctuation" >.</span><span class="token function" >forEach</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span>pane<span class="token punctuation" >,</span> i<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>\n      <span class="token keyword" >if</span> <span class="token punctuation" >(</span>pane<span class="token punctuation" >.</span>key <span class="token operator" >===</span> targetKey<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n        lastIndex <span class="token operator" >=</span> i <span class="token operator" >-</span> <span class="token number" >1</span><span class="token punctuation" >;</span>\n      <span class="token punctuation" >}</span>\n    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>\n    <span class="token keyword" >const</span> panes <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>panes<span class="token punctuation" >.</span><span class="token function" >filter</span><span class="token punctuation" >(</span>pane <span class="token operator" >=</span><span class="token operator" >></span> pane<span class="token punctuation" >.</span>key <span class="token operator" >!==</span> targetKey<span class="token punctuation" >)</span><span class="token punctuation" >;</span>\n    <span class="token keyword" >if</span> <span class="token punctuation" >(</span>lastIndex <span class="token operator" >>=</span> <span class="token number" >0</span> <span class="token operator" >&amp;&amp;</span> activeKey <span class="token operator" >===</span> targetKey<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n      activeKey <span class="token operator" >=</span> panes<span class="token punctuation" >[</span>lastIndex<span class="token punctuation" >]</span><span class="token punctuation" >.</span>key<span class="token punctuation" >;</span>\n    <span class="token punctuation" >}</span>\n    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span> panes<span class="token punctuation" >,</span> activeKey <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>\n  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>\n  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>div</span><span class="token punctuation" >></span></span>\n        <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>div</span> <span class="token attr-name" >style</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token punctuation" >{</span> marginBottom<span class="token punctuation" >:</span> <span class="token number" >16</span> <span class="token punctuation" >}</span><span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>\n          <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Button</span> <span class="token attr-name" >type</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>ghost<span class="token punctuation" >"</span></span> <span class="token attr-name" >onClick</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>add<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>\u65b0\u589e<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Button</span><span class="token punctuation" >></span></span>\n        <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>div</span><span class="token punctuation" >></span></span>\n        <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Tabs</span> <span class="token attr-name" >hideAdd</span> <span class="token attr-name" >onChange</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>onChange<span class="token punctuation" >}</span></span> <span class="token attr-name" >activeKey</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>activeKey<span class="token punctuation" >}</span></span>\n          <span class="token attr-name" >type</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>editable-card<span class="token punctuation" >"</span></span> <span class="token attr-name" >onEdit</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>onEdit<span class="token punctuation" >}</span></span>\n        <span class="token punctuation" >></span></span>\n          <span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>panes<span class="token punctuation" >}</span>\n        <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Tabs</span><span class="token punctuation" >></span></span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>div</span><span class="token punctuation" >></span></span>\n    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>\n  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>\n<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>\n\nReactDOM<span class="token punctuation" >.</span><span class="token function" >render</span><span class="token punctuation" >(</span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Demo</span> <span class="token punctuation" >/></span></span><span class="token punctuation" >,</span> mountNode<span class="token punctuation" >)</span><span class="token punctuation" >;</span>'}],preview:function(){var n=c["default"].TabPane,a=l["default"].createClass({displayName:"Demo",getInitialState:function(){this.newTabIndex=0;var a=[l["default"].createElement(n,{tab:"\u9009\u9879\u5361",key:"1"},"\u9009\u9879\u5361\u4e00\u5185\u5bb9"),l["default"].createElement(n,{tab:"\u9009\u9879\u5361",key:"2"},"\u9009\u9879\u5361\u4e8c\u5185\u5bb9")];return{activeKey:a[0].key,panes:a}},onChange:function(n){this.setState({activeKey:n})},onEdit:function(n,a){this[a](n)},add:function(){var a=this.state.panes,s="newTab"+this.newTabIndex++;a.push(l["default"].createElement(n,{tab:"\u65b0\u5efa\u9875\u7b7e",key:s},"\u65b0\u9875\u9762")),this.setState({panes:a,activeKey:s})},remove:function(n){var a=this.state.activeKey,s=void 0;this.state.panes.forEach(function(a,t){a.key===n&&(s=t-1)});var t=this.state.panes.filter(function(a){return a.key!==n});s>=0&&a===n&&(a=t[s].key),this.setState({panes:t,activeKey:a})},render:function(){return l["default"].createElement("div",null,l["default"].createElement("div",{style:{marginBottom:16}},l["default"].createElement(o["default"],{type:"ghost",onClick:this.add},"\u65b0\u589e")),l["default"].createElement(c["default"],{hideAdd:!0,onChange:this.onChange,activeKey:this.state.activeKey,type:"editable-card",onEdit:this.onEdit},this.state.panes))}});return l["default"].createElement(a,null)}}}});